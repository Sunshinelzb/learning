<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>循环显示所有参数的组合效果</title>
    <meta name="description" content="">
    <meta name="keywords" content="">
    <link href="" rel="stylesheet">
</head>

<body onload="draw('canvas');">
    <h1>canvas元素示例</h1>
    <canvas id="canvas" width="400" height="300"></canvas>
    <script>
    var globalId;
    var i = 0;

    function draw(id) {
        globalId = id;
        setInterval(Composite,1000);
    }

    function Composite() {
        var canvas = document.getElementById(globalId);
        if (canvas == null) return false;
        var context = canvas.getContext('2d');
        var oprtns = new Array (
            "source-atop",
            "source-in",
            "source-out",
            "source-over",
            "destination-atop",
            "destination-in",
            "destination-out",
            "destination-over",
            "lighten",
            "copy",
            "xor"
        );
        if (i > 10) i = 0;
        context.clearRect(0, 0, canvas.width, canvas.height);
        context.save();
        context.fillStyle = "blue";
        context.fillRect(10, 10, 60, 60);
        context.globalCompositeOperation = oprtns[i];
        context.beginPath();
        context.fillStyle = "red";
        context.arc(60, 60, 30, 0, Math.PI * 2, false);
        context.fill();
        context.restore();
        i++;
    }
    </script>
</body>

</html>
